#!/bin/bash

declare check_kernel

echo
echo "your dir : $PWD"
check_kernel="`pwd | grep kernel`"

rm -rf cscope*
rm -rf *tags*

if [ -z "$check_kernel" ]
then

    echo "it is not kernel dir"

    find ${PWD} -name '*.py' -o -name '*.[chS]' -o -name '*.mk' -o -name '*.hpp' -o -name '*.cpp*' -o -name '*.java' -o -name 'CMakeFiles.txt' -o -name '*.cmake' >cscope.files
    # cscope -bqkv -i cscope.files
    # cscope -b -k
    cscope -b -q -k -R -v -i cscope.files
    ctags -R --c++-kinds=+p --fields=+iaS --extra=+q
    # rm cscope.files

elif [ -e "$check_kernel" ]
then

    echo "it is kernel dir"

    # temporarily disable in cygwin
    # make ARCH=arm tags cscope

    find ${PWD} -name '*.[chS]' -o -name '*.mk' -o -name '*.cpp*' -o -name '*.java' >cscope.files
    # cscope -bqkv -i cscope.files
    # cscope -b -k
    cscope -b -q -k -R -v -i cscope.files
    ctags -R --c++-kinds=+p --fields=+iaS --extra=+q
    # rm cscope.files

fi
